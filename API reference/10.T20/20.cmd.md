 # Service

 ## 接机准备

 终端柜徐处于工作模式，且起降平台无故障且没有停放无人机的情况下，可以执行接机准备指令。


**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** prepare_landing

**Data:** null 



**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** prepare_landing

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|>status|状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||


## 接机准备进度



**Topic:** thing/product/*{gateway_sn}*/events

**Direction:** up

**Method:** prepare_landing

**Data:** 

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|>status|状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||
|>progress|进度|struct|  ||
|>>percent|进度百分比|int| {"max":"100","min":"0","step":"1","unit_name":"百分比 / %"} ||
|>>step_key|当前步骤|enum_string| {"open_cover":"开盖子","up_lift":"升升降","close_upload_hatch":"关上下货窗","unlock_pos_bar":"松归中杆"} ||


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"output": {
			"progress": {
				"percent": 90,
				"step_key": "unlock_pos_bar"
			},
			"status": "in_progress"
		},
		"result": 0
	},
	"method": "prepare_landing",
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655
}
```

## 接机


**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** stow_drone

**Data:** null 



**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** stow_drone

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|>status|状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||

## 接机准备进度



**Topic:** thing/product/*{gateway_sn}*/events

**Direction:** up

**Method:** stow_drone

**Data:** 

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|>status|状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||
|>progress|进度|struct|  ||
|>>percent|进度百分比|int| {"max":"100","min":"0","step":"1","unit_name":"百分比 / %"} ||
|>>step_key|当前步骤|enum_string| {"lock_pos_bar":"收归中杆","down_lift":"降升降","open_upload_hatch":"开上下货窗","close_cover":"关盖子"} ||


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"output": {
			"progress": {
				"percent": 90,
				"step_key": "close_cover"
			},
			"status": "in_progress"
		},
		"result": 0
	},
	"method": "stow_drone",
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655
}
```
